import React,{useRef} from "react";
import { MapContainer, TileLayer, useMap, Marker, Popup, useMapEvents, Polyline } from 'react-leaflet'
import 'leaflet/dist/leaflet.css'
import useStyles from "./styles";
import apiClient from "../api";


const Map = () => {
    const mapRef = useRef(null);
    const classes = useStyles();

    // const map = useMapEvents

    const polyline = [[33.9790976, -118.4668347], [33.9792297, -118.4665725], [33.9797448, -118.4656607], [33.9802598, -118.4647571], [33.980632, -118.4641696], [33.9810492, -118.463516], [33.9815668, -118.4627005], [33.9820788, -118.4618969], [33.9825937, -118.4610854], [33.9830179, -118.4604239], [33.9839542, -118.4589291], [33.9841039, -118.4586061], [33.9842317, -118.4584031], [33.9843395, -118.4583214], [33.9849306, -118.4574309], [33.98635, -118.4552], [33.9866096, -118.4547729], [33.9876575, -118.453074], [33.9878295, -118.4527843], [33.9881946, -118.4521865], [33.9882652, -118.4520617], [33.9890594, -118.4505942], [33.9894489, -118.4498165], [33.9898467, -118.449024], [33.9902242, -118.4482756], [33.9904517, -118.4478247], [33.9907704, -118.4472032], [33.9926271, -118.4481048], [33.9920494, -118.4491432], [33.9923427, -118.4494641], [33.9925518, -118.4493229], [33.9933026, -118.448748], [33.9933846, -118.4484754], [33.9933653, -118.4486337], [33.9952907, -118.4501023], [33.9954044, -118.4498671], [33.9958795, -118.4492546], [33.9972643, -118.450309], [33.9977541, -118.4493772], [33.998249, -118.4484406], [33.9987397, -118.447512], [33.9989503, -118.4476714], [33.9993479, -118.4469218], [33.9997453, -118.4461741], [34.0001518, -118.4454167], [34.0005511, -118.444675], [34.0009431, -118.4439278], [34.0016316, -118.4426288], [34.0025882, -118.4433558], [34.0030084, -118.4425689], [34.0034339, -118.4417627], [34.00386, -118.4409587], [34.0042825, -118.440149], [34.004594, -118.4392591], [34.0050643, -118.438373], [34.0055335, -118.437479], [34.0060024, -118.4365884], [34.0064757, -118.4356896], [34.006803, -118.4359376], [34.0072668, -118.43471], [34.0073473, -118.4331037], [34.0089934, -118.43436], [34.0096301, -118.433154], [34.0101776, -118.432116], [34.0112387, -118.4298277], [34.0116055, -118.4291067], [34.0118282, -118.4287549], [34.0120211, -118.4283966], [34.0124081, -118.427588], [34.0130619, -118.426229], [34.0135644, -118.4252206], [34.0139998, -118.424351], [34.0144378, -118.4234699], [34.0149522, -118.4225095], [34.0155556, -118.4229865], [34.0167466, -118.4239061], [34.0183252, -118.4251612], [34.019267, -118.4222348], [34.0199944, -118.4207748], [34.020373, -118.4199696], [34.0207465, -118.4192035], [34.0211858, -118.41831], [34.0216078, -118.4174425], [34.022044, -118.416564], [34.023406, -118.4138799], [34.0247331, -118.411623], [34.0252691, -118.4106796], [34.0258381, -118.4096153], [34.0264143, -118.4085416], [34.0269938, -118.4074522], [34.0275606, -118.4064], [34.0283856, -118.4048533], [34.0290795, -118.4036833], [34.0297948, -118.4030137], [34.0299975, -118.4028457], [34.0304372, -118.402414], [34.0309301, -118.4017062], [34.0339847, -118.400628], [34.0349466, -118.400237], [34.03448, -118.3985953], [34.0353725, -118.3982476], [34.0357323, -118.398089], [34.035468, -118.397103], [34.036835, -118.396536], [34.0398269, -118.3953966], [34.039441, -118.394473], [34.0393894, -118.3929177], [34.0394964, -118.3925741], [34.0412466, -118.391908], [34.044, -118.3919857], [34.0449237, -118.3919636], [34.0455477, -118.391679], [34.0466028, -118.3913818], [34.0474305, -118.3915568], [34.0481706, -118.3915451], [34.0486585, -118.391001], [34.0495761, -118.389586], [34.0508289, -118.389538], [34.052447, -118.389494], [34.0542755, -118.389446], [34.054277, -118.388438], [34.0542872, -118.3874261], [34.0552718, -118.3873948], [34.0552725, -118.3868311], [34.0570979, -118.386781], [34.0571047, -118.3857468], [34.0571064, -118.3847335], [34.0571029, -118.3836734], [34.0593785, -118.3836261], [34.0609365, -118.3835902], [34.062208, -118.3835709], [34.0629363, -118.3835602], [34.0629305, -118.3824108], [34.0629438, -118.381375], [34.0629402, -118.3803353], [34.0629403, -118.379321], [34.062947, -118.3783005], [34.0609455, -118.378308], [34.0605681, -118.3783006], [34.0593884, -118.3782824], [34.0593919, -118.3772824], [34.0594705, -118.3761938], [34.0594971, -118.37582], [34.0594953, -118.3752615], [34.0594445, -118.374829], [34.0593126, -118.373689], [34.0590963, -118.3717902], [34.0589648, -118.3706329], [34.0588745, -118.3698394], [34.0598519, -118.3697626], [34.0607156, -118.368919], [34.0614937, -118.3681606], [34.0613715, -118.3679505], [34.0610715, -118.3671135], [34.0614794, -118.3670855], [34.0615497, -118.3669953], [34.0610285, -118.362402], [34.0619174, -118.3619459], [34.0629761, -118.3614352], [34.0640278, -118.3613934], [34.0648822, -118.3613928], [34.0648723, -118.3592284], [34.0648832, -118.3546839], [34.0648763, -118.3525065], [34.0648857, -118.3514668], [34.0661949, -118.350578], [34.0699116, -118.3511023], [34.07102, -118.3510803], [34.0735612, -118.3511018], [34.0761404, -118.3511052], [34.0782417, -118.351118], [34.0802506, -118.3511223], [34.0818297, -118.351127], [34.083576, -118.3511274], [34.0853169, -118.351104], [34.0871176, -118.351105], [34.0871149, -118.3498298], [34.0871164, -118.3486664], [34.0871002, -118.347424], [34.0870943, -118.3462911], [34.0870942, -118.3462372], [34.0870947, -118.3451641], [34.0870893, -118.3440601], [34.0888991, -118.3440654], [34.0888993, -118.342786], [34.0907101, -118.3427917], [34.0925759, -118.3428088], [34.0943326, -118.3428229], [34.0961557, -118.3428341], [34.096159, -118.342498], [34.0979796, -118.3425176], [34.0979756, -118.3415576], [34.0979748, -118.3413712], [34.0979712, -118.3404967], [34.0979775, -118.3386842], [34.0997154, -118.3387065], [34.0997117, -118.3375739], [34.0997096, -118.3369677], [34.0997075, -118.3363305], [34.0997057, -118.3361235], [34.0997032, -118.3350206], [34.0997576, -118.3338279], [34.0997642, -118.3324825], [34.0997712, -118.3310411], [34.0997787, -118.3295211], [34.1016069, -118.3295432], [34.1039357, -118.3297051], [34.1039217, -118.3281874], [34.1037668, -118.3267186], [34.1047622, -118.3267064], [34.1050808, -118.3267057], [34.1051977, -118.3259511], [34.1052348, -118.325681], [34.1052444, -118.3252509], [34.1052393, -118.3240015], [34.1052538, -118.3229368], [34.1073158, -118.3223673], [34.1091052, -118.3223892], [34.110084, -118.3223807], [34.1100912, -118.3214988], [34.1105481, -118.3214954], [34.1117158, -118.3215008], [34.1125291, -118.3214651], [34.1125388, -118.3208134], [34.1125752, -118.320413], [34.1132227, -118.3201505], [34.1125422, -118.3196533], [34.1130665, -118.3194743], [34.1125391, -118.318886], [34.1121383, -118.3188313], [34.1122103, -118.317132], [34.1124838, -118.3170124], [34.1138411, -118.3162773], [34.1142312, -118.3162182], [34.1148012, -118.3161262], [34.1150506, -118.3151588], [34.1139561, -118.3153696], [34.1144395, -118.3137428], [34.1157391, -118.313462], [34.1158362, -118.3133371], [34.1154933, -118.3129994], [34.114174, -118.3116696], [34.1140846, -118.3116142], [34.1136721, -118.3112682], [34.1139474, -118.3105913], [34.1128474, -118.3095145], [34.112458, -118.3087543], [34.1126057, -118.3074454], [34.1233598, -118.3022151], [34.1232076, -118.299628], [34.1188273, -118.2946949], [34.118102, -118.2939649], [34.1177007, -118.2927776], [34.1175966, -118.2922851], [34.1168291, -118.2911317], [34.1154671, -118.2903056], [34.11449, -118.2901476], [34.1131332, -118.2915689], [34.1132264, -118.2919056], [34.1148887, -118.2934374], [34.1148645, -118.294995], [34.112785, -118.2974595], [34.1141698, -118.297455], [34.1158811, -118.2972436], [34.1152283, -118.3001168], [34.1155044, -118.2996619]]
    

    const handleRoute = async () => {
        
        try{
            const response = await apiClient.get('/trips/');
            console.log(response.data);
        }catch(error){
            console.error(error);
        }
    };
    handleRoute()


    // Get the data from backend 
    // const polyline = L.polyline(latlngs, {color: 'red'}).addTo(map);

    const limeOptions = { color: 'red' , weight: 7}

    return (
    <MapContainer 
        className= {classes.mapContainer}
        center={[33.99518, -118.46849]}
        zoom={13}
        ref={mapRef}
        scrollWheelZoom={true}
        // style={{height: "100vh", width: "100vw"}}
    >
        <TileLayer
            attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        />
        <Marker position={[33.99518, -118.46849]}>
            <Popup>
            A pretty CSS3 popup. <br /> Easily customizable.
            </Popup>
        </Marker>
        <Polyline pathOptions={limeOptions} positions={polyline}/> 
      
    </MapContainer>

    );
};

export default Map;
